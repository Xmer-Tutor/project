(this.webpackJsonplearning=this.webpackJsonplearning||[]).push([[0],{21:function(e,t,n){e.exports=n(39)},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){e.exports=n.p+"static/media/logo.b297c66f.jpeg"},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),u=(n(26),n(7)),i=n(6),s=n(8),l=n(5),m=(n(27),n(28),function(e){var t=e.loginUser,n=e.user,c=Object(r.useState)(n.username),o=Object(i.a)(c,2),u=o[0],l=o[1],m=Object(r.useState)(),d=Object(i.a)(m,2),h=d[0],f=d[1];return h?a.a.createElement(s.a,{to:h,push:!0}):a.a.createElement("div",{className:"login-panel"},a.a.createElement("span",null,"Login"),a.a.createElement("input",{value:u,type:"text",onChange:function(e){var t=e.target.value;return l(t)}}),a.a.createElement("button",{disabled:!u,onClick:function(){return t(u).then(f)}},"Login"))}),d=(n(34),function(e){var t=e.user,r=e.logout,c=t.username;return a.a.createElement("div",{className:"Application-header"},a.a.createElement("div",null,a.a.createElement(l.b,{to:"/"},a.a.createElement("img",{className:"company-logo",border:"0",src:n(35),alt:"logo",width:"40",height:"40"})),a.a.createElement("h1",{className:"company-name"},"Tek Learning")),c&&a.a.createElement("div",null,a.a.createElement(l.b,{to:"/myLearning"},a.a.createElement("h2",null,"My Learning")),a.a.createElement(l.b,{to:"/cart"},a.a.createElement("h2",null,"Cart")),a.a.createElement("h2",null,t.username),a.a.createElement("button",{onClick:r},"Logout")))}),h=(n(36),function(e){var t=e.courses.map((function(e,t){var n=e.type,r=e.courses,c="https://img.youtube.com/vi/".concat(r[0].id,"/0.jpg");return a.a.createElement(l.b,{key:n,className:"courseType",to:"/courseType/".concat(t)},a.a.createElement("img",{alt:"thumbnail",src:c}),a.a.createElement("h3",null,n))}));return a.a.createElement("div",{className:"dashboard"},t)}),f=function(e){var t=e.courses,n=e.items,r=t.reduce((function(e,t){var r=t.courses.filter((function(e){var t=e.id;return n.indexOf(t)>=0}));return 0===r.length?e:[].concat(Object(u.a)(e),[{type:t.type,courses:r}])}),[]).map((function(e){var t=e.type,n=e.courses;return a.a.createElement("div",{className:"type",key:t},a.a.createElement("h3",null,t),n.map((function(e){var t=e.id,n=e.title;return a.a.createElement("div",{className:"row",key:t},a.a.createElement("div",null,n),a.a.createElement("iframe",{title:n,width:"576",height:"317",src:"https://www.youtube.com/embed/".concat(t),frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))})))}));return a.a.createElement("div",{className:"cart"},a.a.createElement("h1",null,"My Learning"),a.a.createElement("div",{className:"videos"},r))},p=(n(37),function(e){var t=e.addToCart,n=e.courseType,r=e.disabled,c=n?n.courses.map((function(e){var n="https://img.youtube.com/vi/".concat(e.id,"/0.jpg"),c=r.indexOf(e.id)>=0;return a.a.createElement("div",{key:e.id,className:"course"},a.a.createElement("img",{alt:"thumbnail",src:n}),a.a.createElement("h3",null,e.title),a.a.createElement("div",null,e.description),a.a.createElement("div",null,"Price: $",e.price),c?a.a.createElement("div",null,"Already in Cart / Purchased"):a.a.createElement("button",{onClick:function(){t(e.id)}},"Add to Cart"))})):[];return a.a.createElement("div",{className:"courseType"},a.a.createElement("h1",null,n&&n.type," Courses"),a.a.createElement("div",{className:"courseRows"},c))}),E=(n(38),function(e){var t=e.cartItems,n=e.checkout,r=e.courses,c=e.removeFromCart,o=r.reduce((function(e,n){var r=n.courses.filter((function(e){var n=e.id;return t.indexOf(n)>=0}));return 0===r.length?e:[].concat(Object(u.a)(e),[{type:n.type,courses:r}])}),[]).map((function(e){var t=e.type,n=e.courses;return a.a.createElement("div",{className:"type",key:t},a.a.createElement("h3",null,t),n.map((function(e){var t=e.id,n=e.title,r=e.price;return a.a.createElement("div",{className:"row",key:t},a.a.createElement("div",null,n),a.a.createElement("div",null,"$",r),a.a.createElement("button",{onClick:function(){return c(t)}},"Remove from cart"))})))}));return a.a.createElement("div",{className:"cart"},a.a.createElement("h1",null,"My Cart"),o,a.a.createElement("div",{className:"checkout"},a.a.createElement("button",{onClick:n},"Checkout")))}),y=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),y=Object(i.a)(o,2),v=y[0],j=y[1],b=Object(r.useState)([]),g=Object(i.a)(b,2),k=g[0],w=g[1],O=Object(r.useState)([]),N=Object(i.a)(O,2),P=N[0],T=N[1],C=Object(r.useState)([]),x=Object(i.a)(C,2),L=x[0],S=x[1],H={username:n,cart:P,purchased:L};Object(r.useEffect)((function(){fetch("/session",{method:"GET",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"No Session"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then(A),fetch("/courses",{method:"GET",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then(I)}),[]);var A=function(e){var t=e.data;return c(t.username),j(!0),T(t.cart),S(t.purchased),"/"},I=function(e){var t=e.data;return w(t)},M=function(e){return function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then(A)},U=function(e){T([].concat(Object(u.a)(P),[e])),function(e){fetch("/cartApi/".concat(e),{method:"PUT",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))}))}(e)},G=[a.a.createElement(s.b,{exact:!0,key:"login",path:"/login"},a.a.createElement(m,{loginUser:M,user:H}))];return v&&G.push(a.a.createElement(s.b,{exact:!0,key:"courseType",path:"/courseType/:typeIndex",render:function(e){var t=e.match.params.typeIndex,n=k[t];if(n)return a.a.createElement(p,{addToCart:U,courseType:n,disabled:[].concat(Object(u.a)(P),Object(u.a)(L))})}}),a.a.createElement(s.b,{exact:!0,key:"myLearning",path:"/myLearning"},a.a.createElement(f,{courses:k,items:L})),a.a.createElement(s.b,{exact:!0,key:"cart",path:"/cart"},a.a.createElement(E,{cartItems:P,checkout:function(){fetch("/cartApi/checkout",{method:"GET",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then(A)},courses:k,removeFromCart:function(e){T(P.filter((function(t){return t!==e}))),function(e){fetch("/cartApi/".concat(e),{method:"DELETE",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))}))}(e)}})),a.a.createElement(s.b,{key:"dashboard",path:"/"},a.a.createElement(h,{courses:k}))),G.push(a.a.createElement(s.b,{path:"/",key:"catchall"},a.a.createElement(m,{loginUser:M,user:H}))),a.a.createElement(l.a,null,a.a.createElement(d,{user:H,logout:function(){return fetch("/session",{method:"DELETE",headers:new Headers({"content-type":"application/json"})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))})).then((function(){c(""),j(!1),T([])}))}}),a.a.createElement(s.d,null,G))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.69080602.chunk.js.map